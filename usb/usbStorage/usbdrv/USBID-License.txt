Свободная от выплат неэксклюзивная лицензия для USB ID продукта
===============================================================

Версия 2008-04-07

OBJECTIVE DEVELOPMENT Software GmbH этим документом предоставляет Вам
неэксклюзивное право использовать три пары ID вендора (VID) / ID продукта
(PID), выданные USB.org. Эти пары VID/PID можно использовать только для 
продуктов, основанных на USB firmware драйвере, разработанном Objective 
Development для микроконтроллеров Atmel AVR:

 * VID = 5824 (=0x16c0) / PID = 1500 (=0x5dc) для устройств, не принадлежащих
   к какому-либо классу USB (класс устройств вендора USB, где 
   class = 0xff). Устройства, использующие эту пару, будут относиться к
   устройствам типа "VENDOR CLASS".

 * VID = 5824 (=0x16c0) / PID = 1503 (=0x5df) для устройств HID-класса
   (исключая миши и клавиатуры). Устройства, использующие эту пару, будут 
   относиться к устройствам типа "HID CLASS".

 * VID = 5824 (=0x16c0) / PID = 1505 (=0x5e1) для класса модемов CDC.
   Устройства, использующие эту пару, будут относиться к устройствам типа 
   "CDC-ACM CLASS".

 * VID = 5824 (=0x16c0) / PID = 1508 (=0x5e4) для MIDI класса.
   Устройства, использующие эту пару, будут относиться к устройствам типа
   "MIDI CLASS".

Поскольку предоставляемые  права являются неэксклюзивными, те же самые
пары VID/PID могут использоваться многими компаниями и частными лицами
для различных продуктов. Чтобы избежать конфликтов, ваше USB-устройство
и драйвер хоста ДОЛЖНЫ придерживаться правил, изложенных далее.

OBJECTIVE DEVELOPMENT Software GmbH лицензировало эти пары VID/PID у 
Wouter van Ooijen (см. www.voti.nl), кто лицензировал VID на USB
Implementers Forum, Inc. (см. www.usb.org). VID зарегистрирован на 
компагию "Van Ooijen Technische Informatica".


ПРАВИЛА И ОГРАНИЧЕНИЯ
=====================

(1) Устройство USB ДОЛЖНО предоставлять текстовое орисание для 
идентификации производителя и продукта. Идентификация производителя 
ДОЛЖНА БЫТЬ доступна как минимум на USB языке 0x0409 (English/US).

(2) Текстовая идентификация производителя ДОЛЖНА содержать либо доменное имя 
Инттернета (например "mycompany.com"), зарегистрированное Вами и принадлежащее
Вам, либо адрес e-mail под Вашим контролем (например "myname@gmx.net"). 
Вы можете встроить имя домена или адрес e-mail в любую строку по Вашему
желанию, например "Objective Development http://www.obdev.at/avrusb/".

(3) Вы ответственны за сохранение монопольного использования указанного домена
или почтового адреса, пока любые экземпляры Вашей продукции находятся 
в использовании.

(4) Вы можете выбрать любую строку для текстовой идентификации, пока 
эта последовательность уникальна в рамках Вашей текстовой идентификации 
изготовителя.

(5) Соответствие Ваших специальных драйверов для устройств ДОЛЖНО основываться
на текстовой идентификации производителя и продукта в дополнение к обычному
соответствию паре VID/PID. Это означает, что особенности операционной системы, 
которые основаны ТОЛЬКО на соответствии VID/PID (например, драйверы ядра 
Windows, автоматические действия, когда устройство включено и т.д), НЕ ДОЛЖНЫ 
использоваться. Соответствие драйвера ДОЛЖНО основываться на совпадении 
всей строки, а НЕ её части. Для устройств CDC-ACM CLASS и MIDI CLASS
должен использоваться драйвер generic-класса (обычный) и соответствие должно
основываться на классе USB-устройства.

(6) Степень, до которой для VID/PID соответствие допустимо для не 
device-specific драйверов или их особенностей, зависит от операционной системы 
и специфической используемой пары VID/PID:

 * Mac OS X, Linux, FreeBSD и другие юниксы: не требуется соответствие VID/PID
   и, следовательно, никакое соответствие исключительно для VID/PID 
   не позволено вообще.

 * Windows: операционная система выполняет проверку соответствия VID/PID 
   на уровне драйвера ядра. Вам НЕОБХОДИМО использовать libusb-win32 
   (см. http://libusb-win32.sourceforge.net/) в качестве драйвера ядра
   для устройств VENDOR CLASS. Все устройства HID CLASS используют generic 
   драйвер HID-класса, поставляемый с Windows, за исключением мышей и 
   клавиатур. Таким образом, Вы НЕ ДОЛЖНЫ использовать любую из предоставленных
   в общее пользование пар VID/PID для мышей или клавиатур. Устройства 
   CDC-ACM CLASS требуют ".inf" файл, который соответствует паре VID/PID
   устройства. Этот ".inf" файл ДОЛЖЕН загрузить драйвер "usbser" для 
   конфигурирования устройства как модема (COM-порт).

(7) OBJECTIVE DEVELOPMENT Software GmbH отказывается от обязательств 
по поводу любых проблем, которые вызывает использование предоставленных 
в общее пользование пар VID/PID. Вы были предупреждены, что совместное 
использование пар VID/PID, возможно, вызывает проблемы. Если Вы хотите 
избежать таких проблем, получите свою собственную пару VID/PID 
для исключительного использования.


КАК РЕАЛИЗОВАТЬ ЭТИ ПРАВИЛА
===========================

Для VENDOR CLASS и HID CLASS устройств применяются следующие правила. 
CDC-ACM CLASS и MIDI CLASS устройства используют драйвер операционной 
системы и не нуждаются в пользовательском драйвере.

Драйвер хоста ДОЛЖЕН опросить все устройства, считать предоставляемые 
ими пары VID/PID в виде чисел в их (устройствах) дескрипторах и запросить
строковое представление имени производителя USB на языке 0x0409 
(English/US). Драйвер ДОЛЖЕН сравнить строку ПОЛНОСТЬЮ с текстовой 
идентификационной информацией, выбранной, как указано выше в (2). 
Поиск подстроки для вашего имени домена или адреса e-mail НЕ ДОПУСТИМ. 
Драйвер не должен общаться с устройством (за исключением запроса
дескрипторов), пока не будет выявлено совпадение строк.

Для всех USB-устройств, у которых совпали VID/PID и текстовая идентификация
производителя, драйвер хоста должен запросить текстовую идентификацию 
продукта и сравнить эту строку с ожидаемой от устройства, которым драйвер
может управлять. Драйвер может инициализировать устройство только в том
случае, если строка продукта совпадает полностью.

Objective Development предоставляет примеры таких правил совпадения с
проектом "PowerSwitch" (с использованием libusb) и проетом "Automator"
(используя вызовы Windows на Windows и libusb на Unix).


Технические указания:
=====================

Общее использование одних и тех же пар VID/PID pair многими устройствами
возможно, пока ВСЕ драйвера, которым соответствуют VID/PID, также выполняют
проверку строк текстовой идентификации. Это легко выполнимо для всех
операциооных систем за исключением Windows, поскольку Windows устанавливает
статитческое соединение между парой VID/PID и драйвером уровня ядра. 
Все устройства с одинаковой парой VID/PID, таким образом, использовать 
ОДИН И ТОТ ЖЕ драйвер уровня ядра.

Мы поэтому требуем, чтобы Вы использовали libusb-win32 для устройств 
VENDOR CLASS. Это generic драйвер уровня ядра, который позволяет всем типам
USB доступ на уровне пользовательских приложений. Это темне менее частичное 
решение проблемы потому что различные драйвера устройств могут приходить
с различными версиями libusb-win32 и они, возможно, могут не работь с libusb 
версией соответствующего другого драйвера. Вы поэтому заинтересованы проверить 
Ваш драйвер на широком диапазоне версий libusb-win32. Не используйте новые 
возможности в новых версиях, либо проверьте их существование перед 
использованием. Когда новая версия libusb-win32 становится доступной, 
убедитесь, что Ваш драйвер совместим с ней.

Для устройств HID CLASS нет необходимости связывать эти устройства с одним и тем
же драйвером ядра: Microsoft generic USB HID драйвер. Это верно для всех
устройств HID, за исключением тех, которые имеют специализированный драйвер. 
В настоящий момент такими HID-устройствами со специализированными драйверами
являются мыши и клавиатуры. Таким образом, Вы НЕ ДОЛЖНЫ использовать общие
VID/PID с устройствами типа мыши и клавиатуры.

Совместное использование тех же самых VID/PID среди различной продукции необычно 
и вероятно нарушает спецификацию USB. Если Вы делаете это, то делаете на с
обственный риск.

Чтобы избежать возможных несовместимостей, мы очень рекомендуем получить 
свою собственную пару VID/PID, если Вы намереваетесь продавать свой продукт. 
Коммерческая лицензия Objective Development для AVR-USB включает в себя 
PID (не VID!) для неограниченного эксклюзивного использования.

Перевод: microsin.ru 
